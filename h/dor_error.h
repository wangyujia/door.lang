/* dor_error.h : door错误定义头文件 */

#ifndef _DOR_ERROR_H_
#define _DOR_ERROR_H_


#ifdef __cplusplus
extern "C" {
#endif


/********************************************************************************
 * 错误号获取或者设置
 ********************************************************************************/
extern  void        dor_set_errcode(int err);
extern  int         dor_get_errcode();
extern  const char *dor_get_errinfo(int err);


/********************************************************************************
 * 错误类型定义 (由'模块号'(8位)+'功能号'(8位)+'文件行'(16位)组成)
 ********************************************************************************/
typedef int DOR_ERR;


/********************************************************************************
 * 默认的模块号和功能号
 ********************************************************************************/
#ifndef DOR_MOD
#define DOR_MOD     0xFF
#endif
#ifndef DOR_FUN
#define DOR_FUN     0xFF
#endif


/********************************************************************************
 * 错误码组装
 ********************************************************************************/
#define DOR_FAIL    ((((DOR_MOD) & 0xFF) << 24) | \
                     (((DOR_FUN) & 0xFF) << 16) | \
                      ((__LINE__) & 0xFFFF))


/********************************************************************************
 * 错误码基址
 ********************************************************************************/
enum DOR_ERR_BASE {
    DOR_OK = 0,                                                 /* 成功码 */
    DOR_ERR_PARSE,                                              /* 解析 */

    DOR_FAILED = -1                                             /* 失败 (通用) */
};


/********************************************************************************
 * 常用错误码信息
 ********************************************************************************/
#define DX_ERR_INFOS                                                    \
    {DX_OK,                 "ok"},                                      \
    {DX_FAILED,             "failed"}


#ifdef __cplusplus
}
#endif


#endif /* #ifndef _DOR_ERROR_H_ */
